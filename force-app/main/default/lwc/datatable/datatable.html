<template>
  <template if:true={showSoql}>{query}</template>
  <div if:true={data} class="slds-is-relative" style="height: 100%">
    <c-datatable-base
      hide-checkbox-column={hideCheckboxColumn}
      data={data}
      columns={_columns}
      key-field="Id"
      sorted-by={sortedByFormatted}
      sorted-direction={_sortedDirection}
      onsort={updateSortField}
      selected-rows={_selectedRows}
      onrowselection={handleRowSelection}
      enable-infinite-loading={_enableInfiniteLoading}
      onloadmore={loadMoreData}
      onrowaction={handleRowAction}
      onsave={handleSave}
      errors={errors}
      is-loading={isLoadingMore}
      suppress-bottom-bar={isLoading}
      draft-values={draftValues}
      oninlineedit={handleFieldEdit}
      >
    </c-datatable-base>
    <div if:true={isLoading}>
      <lightning-spinner size="large" variant="brand" alternative-text="Loading data..."></lightning-spinner>
    </div>
  </div>
</template>